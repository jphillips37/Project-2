<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Pipe Dreams</title>
	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<!--Bootstrap JQuery-->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>
	<!-- Google Font and Font Awesome -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Permanent+Marker">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- AJAX -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<!-- Jquery -->
	<script src="https://code.jquery.com/jquery.js"></script>
	<!--Reset-->
	<link rel="stylesheet" type="text/css" href="/assets/reset.css">
	<!-- CSS -->
	<link rel="stylesheet" type="text/css" media="screen" href="/assets/style.css">

	{{!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; font-src 'self' data: https://fonts.googleapis.com/css?family=Permanent+Marker;"> --}}
</head>

<body>
	<nav class="navbar-expand-lg navbar-light bg-blue">
		<div class="container">
			<div class="row">
				<!-- camera -->
				<div class="col">
					<a class="navbar-brand" href="#"><i class="fa fa-video-camera" aria-hidden="true"></i></a>
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
						aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
					</button>
				</div>
				<!-- Logo -->
				<div class="col d-flex justify-content-center">
					<a class="navbar-brand" href="/">
						<h2> Pipe Dreams</h2>
					</a>
				</div>
				<!-- dropdown -->
				<div class="col  d-flex flex-row-reverse">
					<div class="collapse navbar-collapse d-flex flex-row-reverse" id="navbarNavDropdown">
						<ul class="navbar-nav">
							<li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
									data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									<i class="fa fa-bars" aria-hidden="true"></i>
								</a>
								<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
									<a class="dropdown-item" id="signup-login-btn" href="/signup">Sign Up</a>
									<a class="dropdown-item" id="login-btn" href="/signin">Sign In</a>
									<a class="dropdown-item" id="logout-btn" href="/logout">Log Out</a>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</nav>
	<br>
	<div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                <img src="/img/surfing.jpg" alt="surf" width="100%" height="175">
            </div>
            <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                <img id="hide" src="/img/kite2.jpg" alt="kite" width="100%" height="175">
            </div>
            <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                <img id="hide" src="/img/wind2.jpg" alt="wind" width="100%" height="175">
            </div>
        </div>
		    <br>
		<div id="mybutton">
			<button class="post"><a href="./newpost" id="plusbutton">+</a></button>
		</div>
    <div class="container-fluid">
        <div class="d-flex justify-content-center">
            <div class="d-flex justify-content-center">
							<a class="btn btn-primary" href="./region" role="button">Regions</a>
                <form class="form-inline my-2 my-lg-0">
                    <input class="form-control mr-sm-2" id="search-input" type="search" placeholder="Search zip code..." size="50"
                        aria-label="Search">
            </div>
            <div class="d-flex justify-content-center">
                <button class=" btn btn-primary" type="submit" id="submit-button" data-toggle="modal" data-target="#Modal"><i class="fa fa-search" aria-hidden="true"></i></button>
            </div>
            </form>
        </div>
    </div>
    </div>
		{{{ body }}}
	<footer class="text-center">
		<hr>
		<p>&copy; Copyright 2019 Matt Urian, John Phillips, Matt Musil, Drew Lauck</p>
	</footer>
	<div class="modal fade" id="Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title" id="exampleModalLabel"></h1>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <h2 id="match-name"></h2>
          <img id="match-img" src="" width="500px" alt="Photo Image">
		  <br>
		  Temp: <span id="temp"></span> <br>
		  Humidity: <span id="humid"></span>% <br>
		  Wind: <span id="wind"></span> <br>
		  Weather: <span id="weather"></span>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</body>

<script>
	var latitudes = [];
var longitudes = [];
var businessNames = [];
$("#submit-button").on("click", function() {
		event.preventDefault();
    $("#list").empty();
    //$("#list").append('<u><h2>List of Where to Eat</h2></u>');
    var zipcode = $("#search-input").val().trim();
    var liveData = {
        zipcode: zipcode
      };
      //database.ref().push(liveData);
    var latitude, longitude;
    var queryURL = 'https://cors-anywhere.herokuapp.com/https://www.zipcodeapi.com/rest/0rOl7hMQcxZH79DDu2OthcjhqPDWttWMEtqM1X5IOfuAconQ1SbYjVrgOsR7m7hr/info.json/'+ zipcode + '/degrees';
    
    $.ajax({
        url: queryURL,
        headers: {
            'Authorization': 'Bearer w3KC3brKFhrPWf7IUuN5SCc3KIMXj1CfkgHE4Wv56Mot7VJTIWOSAuBS2gfnL6fhC_Xh-TQMK1hB_w0t3hJkMTJSmrLRzLEVlnvVo18ecPgJnAk_jYg_G4f8rTwVXHYx',
        },
        method: "GET",
        dataType: "json"
        }).then(function(response) {
            console.log(response);
            latitude = response.lat;
            longitude = response.lng
		});
	var queryURL = "https://webcamstravel.p.rapidapi.com/webcams/list/nearby=21.34368,-157.70418,100/category=beach/orderby=popularity/limit=20?show=webcams:player";
	$.ajax({
        url: queryURL,
		headers: {
            "X-RapidAPI-Key": "316356a6c4msh637c6c8306ed33ap1fa0e2jsnfd0b081e04b1",
        },
        method: "GET",
        dataType: "json"
        }).then(function(response) {
            console.log(response);
			console.log(response.result.webcams[1].player.day.embed);
			$("#match-img").attr("src", "http://198.16.29.118/axis-cgi/mjpg/video.cgi?resolution=704x480&dummy=garb#.XHWyeHxSVJQ.link");
		});
	//var queryURL = "https://cors-anywhere.herokuapp.com/https://api.openweathermap.org/data/2.5/weather?zip=44224&appid=7cf1ee64fc71f56a71b0aee99d983b15&units=imperial";
	var queryURL = "https://api.openweathermap.org/data/2.5/weather?zip=" + zipcode + "&appid=7cf1ee64fc71f56a71b0aee99d983b15&units=imperial";
	$.ajax({
        url: queryURL,
        method: "GET",
        dataType: "json"
        }).then(function(response) {
            console.log(response);
			$("#exampleModalLabel").text(response.name);
			
			$("#temp").text(response.main.temp);
			$("#humid").text(response.main.humidity);
			$("#wind").text(response.wind.speed);
			$("#weather").text(response.weather[0].description);
		});
	
});
</script>
</body>
</html>
